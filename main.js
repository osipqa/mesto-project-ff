(()=>{"use strict";var e=document.querySelector("#card-template").content.querySelector(".places__item");function t(t,r,n,o){var c=e.cloneNode(!0),p=c.querySelector(".card__image");return c.querySelector(".card__title").textContent=t.name,p.src=t.link,p.alt=t.name,p.addEventListener("click",(function(){return n(t)})),c.querySelector(".card__delete-button").addEventListener("click",r),c.querySelector(".card__like-button").addEventListener("click",o),c}function r(e){e.target.closest(".card").remove()}function n(e){e.target.classList.toggle("card__like-button_is-active")}function o(e){e.classList.add("popup_is-opened"),document.addEventListener("keydown",p)}function c(e){e.classList.remove("popup_is-opened"),document.removeEventListener("keydown",p)}function p(e){"Escape"===e.code&&c(document.querySelector(".popup_is-opened"))}var u,a=document.querySelector(".places__list"),i=document.querySelector(".profile__edit-button"),s=document.querySelector(".profile__add-button"),l=document.querySelector(".popup_type_new-card"),d=document.querySelector(".popup_type_image"),_=d.querySelector(".popup__image"),m=document.querySelector(".popup__caption"),y=document.querySelector(".profile__title"),v=document.querySelector(".profile__description"),f=document.querySelector(".popup_type_edit"),S=f.querySelector(".popup__form"),q=S.querySelector(".popup__input_type_name"),k=S.querySelector(".popup__input_type_description"),E=document.querySelectorAll(".popup"),L=l.querySelector(".popup__input_type_card-name"),g=l.querySelector(".popup__input_type_url");function C(e){_.alt=e.name,m.textContent=e.name,_.src=e.link,o(d)}E.forEach((function(e){e.addEventListener("mouseup",(function(t){var r=t.target,n=t.currentTarget;(r.classList.contains("popup__close")||r===n)&&c(e)}))})),[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}].forEach((function(e){return a.append(t(e,r,C,n))})),i.addEventListener("click",(function(){q.value=y.textContent,k.value=v.textContent,o(f)})),s.addEventListener("click",(function(){o(l)})),l.addEventListener("submit",(function(e){e.preventDefault();var o=t({name:L.value,link:g.value},r,C,n);a.prepend(o),c(l),l.querySelector(".popup__form").reset()})),S.addEventListener("submit",(function(e){e.preventDefault(),y.textContent=q.value,v.textContent=k.value,c(f)})),u={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"},Array.from(document.querySelectorAll(u.formSelector)).forEach((function(e){!function(e,t){Array.from(e.querySelectorAll(t.inputSelector)).forEach((function(r){r.addEventListener("input",(function(){!function(e,t,r){t.validity.patternMismatch?t.setCustomValidity(t.dataset.errorMessage):t.setCustomValidity(""),t.validity.valid?function(e,t,r){var n=e.querySelector(".".concat(t.id,"-error"));t.classList.remove(r.inputErrorClass),n.classList.remove(r.errorClass),n.textContent=""}(e,t,r):function(e,t,r,n){var o=e.querySelector(".".concat(t.id,"-error"));t.classList.add(n.inputErrorClass),o.classList.add(n.errorClass),o.textContent=r}(e,t,t.validationMessage,r)}(e,r,t)}))}))}(e,u)}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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VUQsT0FBT1UsRUFBaUJpQyxpQkFDL0NZLEVBQWF0RCxVQUFVRCxPQUFPVSxFQUFpQmtDLFlBQy9DVyxFQUFhaEUsWUFBYyxFQUM3QixDQVdJbUUsQ0FBZVgsRUFBYUMsRUFBY3RDLEdBdkI5QyxTQUF3QnFDLEVBQWFDLEVBQWNLLEVBQWMzQyxHQUMvRCxJQUFNNkMsRUFBZVIsRUFBWWxFLGNBQWMsSUFBRDJFLE9BQUtSLEVBQWFTLEdBQUUsV0FDbEVULEVBQWEvQyxVQUFVSSxJQUFJSyxFQUFpQmlDLGlCQUM1Q1ksRUFBYXRELFVBQVVJLElBQUlLLEVBQWlCa0MsWUFDNUNXLEVBQWFoRSxZQUFjOEQsQ0FDN0IsQ0FnQklNLENBQWVaLEVBQWFDLEVBQWNBLEVBQWFZLGtCQUFtQmxELEVBSTlFLENBTU1tRCxDQUFRZCxFQUFhQyxFQUFjdEMsRUFDckMsR0FDRixHQUNGLENBS0lvRCxDQUFrQmYsRUFBYXJDLEVBQ2pDLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by1wcm9qZWN0LWZmLy4vc3JjL2NvbXBvbmVudHMvY2FyZHMuanMiLCJ3ZWJwYWNrOi8vbWVzdG8tcHJvamVjdC1mZi8uL3NyYy9jb21wb25lbnRzL2NhcmQuanMiLCJ3ZWJwYWNrOi8vbWVzdG8tcHJvamVjdC1mZi8uL3NyYy9jb21wb25lbnRzL21vZGFsLmpzIiwid2VicGFjazovL21lc3RvLXByb2plY3QtZmYvLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vbWVzdG8tcHJvamVjdC1mZi8uL3NyYy9jb21wb25lbnRzL3ZhbGlkYXRpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcclxuICAgIHtcclxuICAgICAgbmFtZTogJ9CQ0YDRhdGL0LcnLFxyXG4gICAgICBsaW5rOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2Fya2h5ei5qcGcnLFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgbmFtZTogJ9Cn0LXQu9GP0LHQuNC90YHQutCw0Y8g0L7QsdC70LDRgdGC0YwnLFxyXG4gICAgICBsaW5rOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2NoZWx5YWJpbnNrLW9ibGFzdC5qcGcnLFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgbmFtZTogJ9CY0LLQsNC90L7QstC+JyxcclxuICAgICAgbGluazogJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9pdmFub3ZvLmpwZycsXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBuYW1lOiAn0JrQsNC80YfQsNGC0LrQsCcsXHJcbiAgICAgIGxpbms6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQva2FtY2hhdGthLmpwZycsXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBuYW1lOiAn0KXQvtC70LzQvtCz0L7RgNGB0LrQuNC5INGA0LDQudC+0L0nLFxyXG4gICAgICBsaW5rOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2tob2xtb2dvcnNreS1yYXlvbi5qcGcnLFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgbmFtZTogJ9CR0LDQudC60LDQuycsXHJcbiAgICAgIGxpbms6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQvYmFpa2FsLmpwZycsXHJcbiAgICB9LFxyXG5dOyIsImV4cG9ydCB7IGNyZWF0ZUNhcmQsIGRlbGV0ZUNhcmQsIGhhbmRsZUxpa2UgfTtcclxuXHJcbmNvbnN0IGNhcmRUZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjYXJkLXRlbXBsYXRlJykuY29udGVudC5xdWVyeVNlbGVjdG9yKCcucGxhY2VzX19pdGVtJyk7XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVDYXJkKGRhdGEsIGRlbGV0ZUNhcmQsIG9wZW5JbWcsIGhhbmRsZUxpa2UpIHtcclxuICBjb25zdCBjYXJkID0gY2FyZFRlbXBsYXRlLmNsb25lTm9kZSh0cnVlKTtcclxuICBjb25zdCBjYXJkSW1nID0gY2FyZC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9faW1hZ2UnKTtcclxuICBjb25zdCBjYXJkVGl0bGUgPSBjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX190aXRsZScpO1xyXG4gIGNhcmRUaXRsZS50ZXh0Q29udGVudCA9IGRhdGEubmFtZTtcclxuICBjYXJkSW1nLnNyYyA9IGRhdGEubGluaztcclxuICBjYXJkSW1nLmFsdCA9IGRhdGEubmFtZTtcclxuICBjYXJkSW1nLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gb3BlbkltZyhkYXRhKSk7XHJcbiAgY2FyZC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fZGVsZXRlLWJ1dHRvbicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZGVsZXRlQ2FyZCk7XHJcbiAgY2FyZC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fbGlrZS1idXR0b24nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZUxpa2UpO1xyXG4gIHJldHVybiBjYXJkO1xyXG59XHJcblxyXG5mdW5jdGlvbiBkZWxldGVDYXJkKGV2dCkge1xyXG4gIGNvbnN0IGRlbENhcmQgPSBldnQudGFyZ2V0LmNsb3Nlc3QoJy5jYXJkJyk7XHJcbiAgZGVsQ2FyZC5yZW1vdmUoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlTGlrZShldnQpIHtcclxuICBldnQudGFyZ2V0LmNsYXNzTGlzdC50b2dnbGUoJ2NhcmRfX2xpa2UtYnV0dG9uX2lzLWFjdGl2ZScpOyAvLyBXaGVuIGNsaWNrZWQsIHRoZSBjb2xvciBvZiB0aGUgbGlrZSB3aWxsIGNoYW5nZVxyXG59IiwiZXhwb3J0IHsgb3Blbk1vZGFsLCBjbG9zZU1vZGFsIH07XHJcblxyXG5mdW5jdGlvbiBvcGVuTW9kYWwocG9wdXApIHtcclxuICBwb3B1cC5jbGFzc0xpc3QuYWRkKCdwb3B1cF9pcy1vcGVuZWQnKTtcclxuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgY2xvc2VFc2MpOyAvLyBJZiBkb24ndCByZW1vdmUgdGhlIGV2ZW50bGlzdGVuZXIgZnJvbSBjbG9zZU1vZGFsLCBhbiBlcnJvciB3aWxsIG9jY3VyLlxyXG59XHJcblxyXG5mdW5jdGlvbiBjbG9zZU1vZGFsKHBvcHVwKSB7IC8vIFdpdGhvdXQgJ3NldFRpbWVvdXQnLCBpdCBiZWNhbWUgcmVhbGx5IHNhZCBoZXJlLiA6Y1xyXG4gIHBvcHVwLmNsYXNzTGlzdC5yZW1vdmUoJ3BvcHVwX2lzLW9wZW5lZCcpO1xyXG4gIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBjbG9zZUVzYyk7IC8vIFwiVGhpcyBwaWVjZSBvZiBjb2RlIGZpeGVzIHRoYXQuXCJcclxufVxyXG5cclxuZnVuY3Rpb24gY2xvc2VFc2MoZXZ0KSB7XHJcbiAgZXZ0LmNvZGUgPT09ICdFc2NhcGUnICYmIGNsb3NlTW9kYWwoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX2lzLW9wZW5lZCcpKTtcclxufSIsImltcG9ydCAnLi9zdHlsZXMvaW5kZXguY3NzJztcclxuaW1wb3J0IHsgaW5pdGlhbENhcmRzIH0gZnJvbSAnLi9jb21wb25lbnRzL2NhcmRzLmpzJztcclxuaW1wb3J0IHsgY3JlYXRlQ2FyZCwgZGVsZXRlQ2FyZCwgaGFuZGxlTGlrZX0gZnJvbSAnLi9jb21wb25lbnRzL2NhcmQuanMnO1xyXG5pbXBvcnQgeyBvcGVuTW9kYWwsIGNsb3NlTW9kYWwgfSBmcm9tICcuL2NvbXBvbmVudHMvbW9kYWwuanMnO1xyXG5pbXBvcnQgeyBlbmFibGVWYWxpZGF0aW9uIH0gZnJvbSAnLi9jb21wb25lbnRzL3ZhbGlkYXRpb24uanMnO1xyXG5cclxuLy8gdmFyaWFibGUgbmFtZXNcclxuY29uc3QgY2FyZENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wbGFjZXNfX2xpc3QnKTtcclxuY29uc3QgcHJvZmlsZUVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fZWRpdC1idXR0b24nKTtcclxuY29uc3QgcHJvZmlsZUJ1dHRvbkFkZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hZGQtYnV0dG9uJyk7XHJcbmNvbnN0IG5ld0NhcmRQb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF90eXBlX25ldy1jYXJkJyk7XHJcbmNvbnN0IGltYWdlT3BlblBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX3R5cGVfaW1hZ2UnKTtcclxuY29uc3QgaW1hZ2VQb3B1cEltYWdlID0gaW1hZ2VPcGVuUG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbWFnZScpO1xyXG5jb25zdCBpbWFnZVBvcHVwQ2FwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fY2FwdGlvbicpXHJcbmNvbnN0IHByb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX3RpdGxlJyk7XHJcbmNvbnN0IHByb2ZpbGVEZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19kZXNjcmlwdGlvbicpO1xyXG5jb25zdCBwb3B1cFByb2ZpbGVFZGl0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX3R5cGVfZWRpdCcpO1xyXG5jb25zdCBmb3JtUHJvZmlsZUVkaXQgPSBwb3B1cFByb2ZpbGVFZGl0LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZm9ybScpO1xyXG5jb25zdCBpbnB1dE5hbWUgPSBmb3JtUHJvZmlsZUVkaXQucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbnB1dF90eXBlX25hbWUnKTtcclxuY29uc3QgaW5wdXREZXNjcmlwdGlvbiA9IGZvcm1Qcm9maWxlRWRpdC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2lucHV0X3R5cGVfZGVzY3JpcHRpb24nKTtcclxuY29uc3QgYWxsUG9wdXBzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnBvcHVwJyk7XHJcbmNvbnN0IGlucHV0UGxhY2VOYW1lRm9ybUFkZE5ld0NhcmQgPSBuZXdDYXJkUG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbnB1dF90eXBlX2NhcmQtbmFtZScpO1xyXG5jb25zdCBpbnB1dFBsYWNlTGlua0Zvcm1BZGROZXdDYXJkID0gbmV3Q2FyZFBvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW5wdXRfdHlwZV91cmwnKTtcclxuY29uc3QgdmFsaWRhdGlvbkNvbmZpZyA9IHtcclxuICBmb3JtU2VsZWN0b3I6ICcucG9wdXBfX2Zvcm0nLFxyXG4gIGlucHV0U2VsZWN0b3I6ICcucG9wdXBfX2lucHV0JyxcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogJy5wb3B1cF9fYnV0dG9uJyxcclxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiAncG9wdXBfX2J1dHRvbl9kaXNhYmxlZCcsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiAncG9wdXBfX2lucHV0X3R5cGVfZXJyb3InLFxyXG4gIGVycm9yQ2xhc3M6ICdwb3B1cF9fZXJyb3JfdmlzaWJsZSdcclxufVxyXG5cclxuZnVuY3Rpb24gcmVsZWFzZUNhcmQoKSB7XHJcbiAgaW5pdGlhbENhcmRzLmZvckVhY2goY2FyZCA9PiBjYXJkQ29udGFpbmVyLmFwcGVuZChjcmVhdGVDYXJkKGNhcmQsIGRlbGV0ZUNhcmQsIG9wZW5JbWcsIGhhbmRsZUxpa2UpKSk7XHJcbn07XHJcblxyXG5hbGxQb3B1cHMuZm9yRWFjaCgob3V0KSA9PiB7XHJcbiAgb3V0LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCAoe3RhcmdldCwgY3VycmVudFRhcmdldH0pID0+IHsgXHJcbiAgICBjb25zdCBpc1RhcmdldENsb3NlQnV0dG9uID0gdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncG9wdXBfX2Nsb3NlJyk7XHJcbiAgICBjb25zdCBpc1RhcmdldE92ZXJsYXkgPSB0YXJnZXQgPT09IGN1cnJlbnRUYXJnZXQ7XHJcbiAgICBpZiAoaXNUYXJnZXRDbG9zZUJ1dHRvbiB8fCBpc1RhcmdldE92ZXJsYXkpIGNsb3NlTW9kYWwob3V0KTtcclxuICB9KTtcclxufSk7XHJcblxyXG5yZWxlYXNlQ2FyZCgpOyAvLyBpIHdvdWxkIGxpa2UgdG8gZ2V0IHJpZCBvZiB0aGlzIHRoaW5nLCBidXQgSSBzdGlsbCBkb250IGtub3cgaG93IHRvIGRvIGl0Li4uIDpjXHJcblxyXG5mdW5jdGlvbiBoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdChldnQpIHsgLy8gZnVuY3Rpb24gdGhhdCBhbGxvd3MgY2hhbmdpbmcgdGhlIHByb2ZpbGVOYW1lIGFuZCBwcm9maWxlRGVzY3JpcHRpb24gXHJcbiAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgcHJvZmlsZU5hbWUudGV4dENvbnRlbnQgPSBpbnB1dE5hbWUudmFsdWU7XHJcbiAgcHJvZmlsZURlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gaW5wdXREZXNjcmlwdGlvbi52YWx1ZTtcclxuICBjbG9zZU1vZGFsKHBvcHVwUHJvZmlsZUVkaXQpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVDYXJkU3VibWl0KGV2dCkgeyAvLyBmdW5jdGlvbiB0aGF0IGFkZHMgYSBuZXcgY2FyZCB0byB0aGUgcGFnZVxyXG4gIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIGNvbnN0IGlucHV0TmFtZSA9IGlucHV0UGxhY2VOYW1lRm9ybUFkZE5ld0NhcmQudmFsdWU7XHJcbiAgY29uc3QgaW5wdXRMaW5rID0gaW5wdXRQbGFjZUxpbmtGb3JtQWRkTmV3Q2FyZC52YWx1ZTtcclxuICBjb25zdCBjYXJkID0ge1xyXG4gICAgbmFtZTogaW5wdXROYW1lLFxyXG4gICAgbGluazogaW5wdXRMaW5rXHJcbiAgfTtcclxuICBjb25zdCBuZXdDYXJkID0gY3JlYXRlQ2FyZChjYXJkLCBkZWxldGVDYXJkLCBvcGVuSW1nLCBoYW5kbGVMaWtlKTtcclxuICBjYXJkQ29udGFpbmVyLnByZXBlbmQobmV3Q2FyZCk7XHJcbiAgY2xvc2VNb2RhbChuZXdDYXJkUG9wdXApO1xyXG4gIG5ld0NhcmRQb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Zvcm0nKS5yZXNldCgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBvcGVuSW1nKGRhdGEpIHtcclxuICBpbWFnZVBvcHVwSW1hZ2UuYWx0ID0gZGF0YS5uYW1lO1xyXG4gIGltYWdlUG9wdXBDYXB0aW9uLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xyXG4gIGltYWdlUG9wdXBJbWFnZS5zcmMgPSBkYXRhLmxpbms7XHJcbiAgb3Blbk1vZGFsKGltYWdlT3BlblBvcHVwKTtcclxufTtcclxuXHJcbnByb2ZpbGVFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gIGlucHV0TmFtZS52YWx1ZSA9IHByb2ZpbGVOYW1lLnRleHRDb250ZW50O1xyXG4gIGlucHV0RGVzY3JpcHRpb24udmFsdWUgPSBwcm9maWxlRGVzY3JpcHRpb24udGV4dENvbnRlbnQ7XHJcbiAgb3Blbk1vZGFsKHBvcHVwUHJvZmlsZUVkaXQpO1xyXG59KTtcclxuXHJcbnByb2ZpbGVCdXR0b25BZGQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgb3Blbk1vZGFsKG5ld0NhcmRQb3B1cCk7XHJcbn0pO1xyXG5cclxubmV3Q2FyZFBvcHVwLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGhhbmRsZUNhcmRTdWJtaXQpO1xyXG5mb3JtUHJvZmlsZUVkaXQuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXQpO1xyXG5cclxuZW5hYmxlVmFsaWRhdGlvbih2YWxpZGF0aW9uQ29uZmlnKTsiLCJmdW5jdGlvbiBzaG93SW5wdXRFcnJvcihmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2UsIHZhbGlkYXRpb25Db25maWcpIHtcclxuICBjb25zdCBlcnJvckVsZW1lbnQgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XHJcbiAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodmFsaWRhdGlvbkNvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xyXG4gIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHZhbGlkYXRpb25Db25maWcuZXJyb3JDbGFzcyk7XHJcbiAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoaWRlSW5wdXRFcnJvcihmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCB2YWxpZGF0aW9uQ29uZmlnKSB7XHJcbiAgY29uc3QgZXJyb3JFbGVtZW50ID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG4gIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHZhbGlkYXRpb25Db25maWcuaW5wdXRFcnJvckNsYXNzKTtcclxuICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh2YWxpZGF0aW9uQ29uZmlnLmVycm9yQ2xhc3MpO1xyXG4gIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9ICcnO1xyXG59XHJcblxyXG5mdW5jdGlvbiBpc1ZhbGlkKGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQsIHZhbGlkYXRpb25Db25maWcpIHtcclxuICBpZiAoaW5wdXRFbGVtZW50LnZhbGlkaXR5LnBhdHRlcm5NaXNtYXRjaCkge1xyXG4gICAgaW5wdXRFbGVtZW50LnNldEN1c3RvbVZhbGlkaXR5KGlucHV0RWxlbWVudC5kYXRhc2V0LmVycm9yTWVzc2FnZSk7XHJcbiAgfSBlbHNlIHtcclxuICAgIGlucHV0RWxlbWVudC5zZXRDdXN0b21WYWxpZGl0eSgnJyk7XHJcbiAgfVxyXG4gIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICBzaG93SW5wdXRFcnJvcihmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UsIHZhbGlkYXRpb25Db25maWcpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBoaWRlSW5wdXRFcnJvcihmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCB2YWxpZGF0aW9uQ29uZmlnKTtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNldEV2ZW50TGlzdGVuZXJzKGZvcm1FbGVtZW50LCB2YWxpZGF0aW9uQ29uZmlnKSB7XHJcbiAgY29uc3QgaW5wdXRMaXN0ID0gQXJyYXkuZnJvbShmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHZhbGlkYXRpb25Db25maWcuaW5wdXRTZWxlY3RvcikpO1xyXG4gIGlucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcclxuICAgICAgaXNWYWxpZChmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCB2YWxpZGF0aW9uQ29uZmlnKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZW5hYmxlVmFsaWRhdGlvbih2YWxpZGF0aW9uQ29uZmlnKSB7XHJcbiAgY29uc3QgZm9ybUxpc3QgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodmFsaWRhdGlvbkNvbmZpZy5mb3JtU2VsZWN0b3IpKTtcclxuICBmb3JtTGlzdC5mb3JFYWNoKChmb3JtRWxlbWVudCkgPT4ge1xyXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoZm9ybUVsZW1lbnQsIHZhbGlkYXRpb25Db25maWcpO1xyXG4gIH0pO1xyXG59Il0sIm5hbWVzIjpbImNhcmRUZW1wbGF0ZSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNvbnRlbnQiLCJjcmVhdGVDYXJkIiwiZGF0YSIsImRlbGV0ZUNhcmQiLCJvcGVuSW1nIiwiaGFuZGxlTGlrZSIsImNhcmQiLCJjbG9uZU5vZGUiLCJjYXJkSW1nIiwidGV4dENvbnRlbnQiLCJuYW1lIiwic3JjIiwibGluayIsImFsdCIsImFkZEV2ZW50TGlzdGVuZXIiLCJldnQiLCJ0YXJnZXQiLCJjbG9zZXN0IiwicmVtb3ZlIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwib3Blbk1vZGFsIiwicG9wdXAiLCJhZGQiLCJjbG9zZUVzYyIsImNsb3NlTW9kYWwiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiY29kZSIsInZhbGlkYXRpb25Db25maWciLCJjYXJkQ29udGFpbmVyIiwicHJvZmlsZUVkaXRCdXR0b24iLCJwcm9maWxlQnV0dG9uQWRkIiwibmV3Q2FyZFBvcHVwIiwiaW1hZ2VPcGVuUG9wdXAiLCJpbWFnZVBvcHVwSW1hZ2UiLCJpbWFnZVBvcHVwQ2FwdGlvbiIsInByb2ZpbGVOYW1lIiwicHJvZmlsZURlc2NyaXB0aW9uIiwicG9wdXBQcm9maWxlRWRpdCIsImZvcm1Qcm9maWxlRWRpdCIsImlucHV0TmFtZSIsImlucHV0RGVzY3JpcHRpb24iLCJhbGxQb3B1cHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXRQbGFjZU5hbWVGb3JtQWRkTmV3Q2FyZCIsImlucHV0UGxhY2VMaW5rRm9ybUFkZE5ld0NhcmQiLCJmb3JFYWNoIiwib3V0IiwiX3JlZiIsImN1cnJlbnRUYXJnZXQiLCJjb250YWlucyIsImFwcGVuZCIsInZhbHVlIiwicHJldmVudERlZmF1bHQiLCJuZXdDYXJkIiwicHJlcGVuZCIsInJlc2V0IiwiZm9ybVNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJBcnJheSIsImZyb20iLCJmb3JtRWxlbWVudCIsImlucHV0RWxlbWVudCIsInZhbGlkaXR5IiwicGF0dGVybk1pc21hdGNoIiwic2V0Q3VzdG9tVmFsaWRpdHkiLCJkYXRhc2V0IiwiZXJyb3JNZXNzYWdlIiwidmFsaWQiLCJlcnJvckVsZW1lbnQiLCJjb25jYXQiLCJpZCIsImhpZGVJbnB1dEVycm9yIiwic2hvd0lucHV0RXJyb3IiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsImlzVmFsaWQiLCJzZXRFdmVudExpc3RlbmVycyJdLCJzb3VyY2VSb290IjoiIn0=