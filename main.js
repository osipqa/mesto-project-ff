(()=>{"use strict";var e={baseUrl:"https://nomoreparties.co/v1/wff-cohort-2",headers:{authorization:"637888a1-9ced-4570-b92f-3c1ad708077b","Content-Type":"application/json"}};function t(t,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"POST";return fetch("".concat(e.baseUrl).concat(t),{method:o,headers:e.headers,body:JSON.stringify(n)}).then((function(e){return e.json()})).then((function(e){return console.log(e),e}))}var n=document.querySelector("#card-template").content.querySelector(".places__item");function o(e,t,o,r,c){var u=n.cloneNode(!0),a=u.querySelector(".card__delete-button"),i=u.querySelector(".card__image"),l=u.querySelector(".card__title"),s=u.querySelector(".card__like-button"),d=u.querySelector(".card__like-count");return i.src=e.link,l.alt=e.name,l.textContent=e.name,d.textContent=e.likes.length,i.addEventListener("click",(function(){return o(e)})),s.addEventListener("click",(function(){return r(e,c,u)})),u.id=e._id,e.owner&&c!==e.owner._id?a.remove():a.addEventListener("click",(function(){t(e)})),u}function r(e,n,o){var r,c=o.querySelector(".card__like-button"),u=o.querySelector(".card__like-count");!function(e,t){return e.likes.some((function(e){return e._id===t}))}(e,n)?function(e){return t("/cards/likes/".concat(e._id),{},"PUT")}(e).then((function(t){c.textContent=t.likes.length,c.classList.add("card__like-button_is-active"),e.likes=t.likes})).catch((function(e){return console.log(e)})):(r=e,t("/cards/likes/".concat(r._id),{},"DELETE")).then((function(t){u.textContent=t.likes.length,c.classList.remove("card__like-button_is-active"),e.likes=t.likes})).catch((function(e){return console.log(e)}))}function c(e){e.classList.add("popup_is-opened"),document.addEventListener("keydown",a)}function u(e){e.classList.remove("popup_is-opened"),document.removeEventListener("keydown",a)}function a(e){"Escape"===e.code&&u(document.querySelector(".popup_is-opened"))}var i=function(e){return e.some((function(e){return!e.validity.valid}))};function l(e,t,n){var o=n.inputErrorClass,r=n.errorClass,c=e.querySelector(".".concat(t.id,"-error"));t.classList.remove(o),c.classList.remove(r),c.textContent=""}function s(e,t,n){i(e)?(t.disabled=!0,t.classList.add(n.inactiveButtonClass)):(t.disabled=!1,t.classList.remove(n.inactiveButtonClass))}function d(e,t){var n=Array.from(e.querySelectorAll(t.inputSelector)),o=e.querySelector(t.submitButtonSelector);n.forEach((function(n){l(e,n,t)})),s(n,o,t)}var p=document.querySelector(".places__list"),_=document.querySelector(".profile__edit-button"),f=document.querySelector(".profile__add-button"),m=document.querySelector(".profile__image"),v=document.querySelector(".popup__avatar"),y=document.getElementById("link-avatar-input"),S=document.querySelector(".popup_delete-image"),h=S.querySelector(".popup__button"),q=v.querySelector(".popup__button"),b=document.querySelector(".popup_type_new-card"),g=document.querySelector(".popup_type_image"),E=g.querySelector(".popup__image"),C=document.querySelector(".popup__caption"),k=document.querySelector(".profile__title"),L=document.querySelector(".profile__description"),x=document.querySelector(".popup_type_edit"),T=x.querySelector(".popup__button"),A=x.querySelector(".popup__form"),B=A.querySelector(".popup__input_type_name"),D=A.querySelector(".popup__input_type_description"),w=document.querySelectorAll(".popup"),I=b.querySelector(".popup__button"),P=b.querySelector(".popup__input_type_card-name"),U=b.querySelector(".popup__input_type_url"),j={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"};function M(e,t){t.textContent=e?"Сохранение...":t.dataset.buttonText}function G(e){c(S),h.dataset.cardId=e._id}function H(e){E.alt=e.name,C.textContent=e.name,E.src=e.link,c(g)}w.forEach((function(e){e.addEventListener("mouseup",(function(t){var n=t.target,o=t.currentTarget;(n.classList.contains("popup__close")||n===o)&&u(e)}))})),Promise.all([("/users/me",fetch("".concat(e.baseUrl).concat("/users/me"),{method:"GET",headers:e.headers}).then((function(e){return e.json()})).then((function(e){return console.log(e),e}))),fetch("".concat(e.baseUrl).concat("/cards"),{method:"GET",headers:e.headers}).then((function(e){return e.json()})).then((function(e){return console.log(e),e}))]).then((function(e){console.log(e);var t=e[0],n=e[1].filter((function(e){return e.owner._id===t._id}));k.textContent=e[0].name,L.textContent=e[0].about,m.style="background-image: url('".concat(e[0].avatar,"')"),n.forEach((function(e){return p.append(o(e,G,H,r,t._id))}))})).catch((function(e){return console.log(e)})),_.addEventListener("click",(function(){B.value=k.textContent,D.value=L.textContent,d(x,j),c(x)})),f.addEventListener("click",(function(){d(b,j),c(b)})),m.addEventListener("click",(function(){d(v,j),y.value="",c(v)})),b.addEventListener("submit",(function(e){var n,c;e.preventDefault(),M(!0,I),(n=P.value,c=U.value,t("/cards",{name:n,link:c})).then((function(e){p.append(o(e,G,H,r,ID))})).catch((function(e){return console.log(e)})).finally((function(){M(!1,I),u(b)})),b.querySelector(".popup__form").reset()})),A.addEventListener("submit",(function(e){e.preventDefault(),M(!0,T),k.textContent=B.value,L.textContent=D.value,function(e,n){return t("/users/me",{name:e,about:n},"PATCH")}(B.value,D.value).then((function(e){e&&e.name&&e.about&&(k.textContent=e.name,L.textContent=e.about)})).catch((function(e){return console.log(e)})).finally((function(){M(!1,T),u(x)}))})),v.addEventListener("submit",(function(e){var n;e.preventDefault(),M(!0,q),(n=y.value,t("/users/me/avatar",{avatar:n},"PATCH")).then((function(e){m.style="background-image: url('".concat(e.avatar,"')")})).catch((function(e){return console.log(e)})).finally((function(){M(!1,q),u(v)}))})),h.addEventListener("click",(function(e){e.preventDefault(),M(!0,h);var n,o=h.dataset.cardId;console.log("Card ID to delete:",o),(n=o,t("/cards/".concat(n),{},"DELETE")).then((function(){console.log("Card successfully deleted from server");var e=document.getElementById(o);e&&(e.remove(),h.dataset.cardId="",M(!1,h),u(S))})).catch((function(e){return console.log(e)}))})),function(e){Array.from(document.querySelectorAll(e.formSelector)).forEach((function(t){!function(e,t){var n=Array.from(e.querySelectorAll(t.inputSelector)),o=e.querySelector(t.submitButtonSelector);n.forEach((function(r){r.addEventListener("input",(function(){!function(e,t,n){t.validity.patternMismatch?t.setCustomValidity(t.dataset.errorMessage):t.setCustomValidity(""),t.validity.valid?l(e,t,n):function(e,t,n,o){var r=o.inputErrorClass,c=o.errorClass,u=e.querySelector(".".concat(t.id,"-error"));t.classList.add(r),u.classList.add(c),u.textContent=n}(e,t,t.validationMessage,n)}(e,r,t),s(n,o,t)}))}))}(t,e)}))}(j)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QWlCekUsRSIsInNvdXJjZXMiOlsid2VicGFjazovL21lc3RvLXByb2plY3QtZmYvLi9zcmMvY29tcG9uZW50cy9hcGkuanMiLCJ3ZWJwYWNrOi8vbWVzdG8tcHJvamVjdC1mZi8uL3NyYy9jb21wb25lbnRzL2NhcmQuanMiLCJ3ZWJwYWNrOi8vbWVzdG8tcHJvamVjdC1mZi8uL3NyYy9jb21wb25lbnRzL21vZGFsLmpzIiwid2VicGFjazovL21lc3RvLXByb2plY3QtZmYvLi9zcmMvY29tcG9uZW50cy92YWxpZGF0aW9uLmpzIiwid2VicGFjazovL21lc3RvLXByb2plY3QtZmYvLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgY29uZmlnID0ge1xyXG4gIGJhc2VVcmw6ICdodHRwczovL25vbW9yZXBhcnRpZXMuY28vdjEvd2ZmLWNvaG9ydC0yJyxcclxuICBoZWFkZXJzOiB7XHJcbiAgICBhdXRob3JpemF0aW9uOiAnNjM3ODg4YTEtOWNlZC00NTcwLWI5MmYtM2MxYWQ3MDgwNzdiJyxcclxuICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRJbmZvKGRhdGEpIHtcclxuICByZXR1cm4gZmV0Y2goYCR7Y29uZmlnLmJhc2VVcmx9JHtkYXRhfWAsIHtcclxuICAgIG1ldGhvZDogXCJHRVRcIixcclxuICAgIGhlYWRlcnM6IGNvbmZpZy5oZWFkZXJzLFxyXG4gIH0pXHJcbiAgLnRoZW4ocmVzID0+IHJlcy5qc29uKCkpXHJcbiAgLnRoZW4ocmVzID0+IHtcclxuICAgIGNvbnNvbGUubG9nKHJlcyk7XHJcbiAgICByZXR1cm4gcmVzO1xyXG4gIH0pXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRDYXJkcyhkYXRhKSB7XHJcbiAgcmV0dXJuIGZldGNoKGAke2NvbmZpZy5iYXNlVXJsfSR7ZGF0YX1gLCB7XHJcbiAgICBtZXRob2Q6IFwiR0VUXCIsXHJcbiAgICBoZWFkZXJzOiBjb25maWcuaGVhZGVycyxcclxuICB9KVxyXG4gIC50aGVuKHJlcyA9PiByZXMuanNvbigpKVxyXG4gIC50aGVuKHJlcyA9PiB7XHJcbiAgICBjb25zb2xlLmxvZyhyZXMpO1xyXG4gICAgcmV0dXJuIHJlcztcclxuICB9KVxyXG59XHJcblxyXG5mdW5jdGlvbiBwb3N0KHVzZXJzLCBkYXRhLCBtZXRob2QgPSBcIlBPU1RcIikge1xyXG4gIHJldHVybiBmZXRjaChgJHtjb25maWcuYmFzZVVybH0ke3VzZXJzfWAsIHtcclxuICAgIG1ldGhvZCxcclxuICAgIGhlYWRlcnM6IGNvbmZpZy5oZWFkZXJzLFxyXG4gICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSksXHJcbiAgfSlcclxuICAudGhlbihyZXMgPT4gcmVzLmpzb24oKSlcclxuICAudGhlbihyZXMgPT4ge1xyXG4gICAgY29uc29sZS5sb2cocmVzKTtcclxuICAgIHJldHVybiByZXM7XHJcbiAgfSlcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHRvQ2hhbmdlTmFtZXMoaW5wdXROYW1lLCBpbnB1dERlc2NyaXB0aW9uKSB7XHJcbiAgcmV0dXJuIHBvc3QoXCIvdXNlcnMvbWVcIiwgeyBuYW1lOiBpbnB1dE5hbWUsIGFib3V0OiBpbnB1dERlc2NyaXB0aW9ufSwgXCJQQVRDSFwiKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHRvQ2hhbmdlQXZhdGFyKGF2YXRhckxpbmspIHtcclxuICByZXR1cm4gcG9zdChcIi91c2Vycy9tZS9hdmF0YXJcIiwgeyBhdmF0YXI6IGF2YXRhckxpbmsgfSwgXCJQQVRDSFwiKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGFkZENhcmRzKGRhdGFOYW1lLCBkYXRhTGluaykge1xyXG4gIHJldHVybiBwb3N0KFwiL2NhcmRzXCIsIHsgbmFtZTogZGF0YU5hbWUsIGxpbms6IGRhdGFMaW5rfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBkZWxldGVDYXJkcyhjYXJkSWQpIHtcclxuICByZXR1cm4gcG9zdChgL2NhcmRzLyR7Y2FyZElkfWAsIHt9LCBcIkRFTEVURVwiKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGRlbGV0ZUxpa2UoZGF0YSkge1xyXG4gIHJldHVybiBwb3N0KGAvY2FyZHMvbGlrZXMvJHtkYXRhWydfaWQnXX1gLCB7fSwgXCJERUxFVEVcIik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBhZGRMaWtlKGRhdGEpIHtcclxuICByZXR1cm4gcG9zdChgL2NhcmRzL2xpa2VzLyR7ZGF0YVsnX2lkJ119YCwge30sIFwiUFVUXCIpO1xyXG59IiwiaW1wb3J0IHsgYWRkTGlrZSwgZGVsZXRlTGlrZSB9IGZyb20gXCIuL2FwaVwiO1xyXG5leHBvcnQgeyBjcmVhdGVDYXJkLCBoYW5kbGVMaWtlIH07XHJcblxyXG5jb25zdCBjYXJkVGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY2FyZC10ZW1wbGF0ZScpLmNvbnRlbnQucXVlcnlTZWxlY3RvcignLnBsYWNlc19faXRlbScpO1xyXG5cclxuZnVuY3Rpb24gY3JlYXRlQ2FyZChkYXRhLCByZW1vdmVDYXJkLCBvcGVuSW1nLCBoYW5kbGVMaWtlLCBJRCkge1xyXG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZFRlbXBsYXRlLmNsb25lTm9kZSh0cnVlKTtcclxuICBjb25zdCBjYXJkRGVsZXRlQnV0dG9uID0gY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX2RlbGV0ZS1idXR0b24nKTtcclxuICBjb25zdCBjYXJkSW1hZ2UgPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9faW1hZ2UnKTtcclxuICBjb25zdCBjYXJkVGl0bGUgPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fdGl0bGUnKTtcclxuICBjb25zdCBjYXJkTGlrZUJ1dHRvbiA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19saWtlLWJ1dHRvbicpO1xyXG4gIGNvbnN0IGNhcmRMaWtlQ291bnQgPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fbGlrZS1jb3VudCcpO1xyXG4gIGNhcmRJbWFnZS5zcmMgPSBkYXRhLmxpbms7XHJcbiAgY2FyZFRpdGxlLmFsdCA9IGRhdGEubmFtZTtcclxuICBjYXJkVGl0bGUudGV4dENvbnRlbnQgPSBkYXRhLm5hbWU7XHJcbiAgY2FyZExpa2VDb3VudC50ZXh0Q29udGVudCA9IGRhdGEubGlrZXMubGVuZ3RoO1xyXG4gIGNhcmRJbWFnZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IG9wZW5JbWcoZGF0YSkpO1xyXG4gIGNhcmRMaWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gaGFuZGxlTGlrZShkYXRhLCBJRCwgY2FyZEVsZW1lbnQpKTtcclxuICBjYXJkRWxlbWVudC5pZCA9IGRhdGFbJ19pZCddO1xyXG4gIGlmIChkYXRhLm93bmVyICYmIElEICE9PSBkYXRhLm93bmVyWydfaWQnXSkge1xyXG4gICAgY2FyZERlbGV0ZUJ1dHRvbi5yZW1vdmUoKTtcclxuICB9IGVsc2Uge1xyXG4gICAgY2FyZERlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgcmVtb3ZlQ2FyZChkYXRhKTtcclxuICAgIH0pO1xyXG4gIH1cclxuICByZXR1cm4gY2FyZEVsZW1lbnQ7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUxpa2UoY2FyZCwgSUQsIGNhcmRFbGVtZW50KSB7XHJcbiAgY29uc3QgYnV0dG9uTGlrZSA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19saWtlLWJ1dHRvbicpO1xyXG4gIGNvbnN0IGJ1dHRvbkNvdW50ID0gY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX2xpa2UtY291bnQnKVxyXG4gIGlmIChjaGVjayhjYXJkLCBJRCkpIHtcclxuICAgIGRlbGV0ZUxpa2UoY2FyZClcclxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgIGJ1dHRvbkNvdW50LnRleHRDb250ZW50ID0gcmVzLmxpa2VzLmxlbmd0aDtcclxuICAgICAgICBidXR0b25MaWtlLmNsYXNzTGlzdC5yZW1vdmUoJ2NhcmRfX2xpa2UtYnV0dG9uX2lzLWFjdGl2ZScpO1xyXG4gICAgICAgIGNhcmQubGlrZXMgPSByZXMubGlrZXM7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaChlcnIgPT4gY29uc29sZS5sb2coZXJyKSk7XHJcbiAgfSBlbHNlIHtcclxuICAgIGFkZExpa2UoY2FyZClcclxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgIGJ1dHRvbkxpa2UudGV4dENvbnRlbnQgPSByZXMubGlrZXMubGVuZ3RoO1xyXG4gICAgICAgIGJ1dHRvbkxpa2UuY2xhc3NMaXN0LmFkZCgnY2FyZF9fbGlrZS1idXR0b25faXMtYWN0aXZlJyk7XHJcbiAgICAgICAgY2FyZC5saWtlcyA9IHJlcy5saWtlcztcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKGVyciA9PiBjb25zb2xlLmxvZyhlcnIpKVxyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gY2hlY2soZGF0YSwgSUQpIHtcclxuICByZXR1cm4gZGF0YS5saWtlcy5zb21lKChpKSA9PiBpWydfaWQnXSA9PT0gSUQpO1xyXG59IiwiZXhwb3J0IHsgb3Blbk1vZGFsLCBjbG9zZU1vZGFsIH07XHJcblxyXG5mdW5jdGlvbiBvcGVuTW9kYWwocG9wdXApIHtcclxuICBwb3B1cC5jbGFzc0xpc3QuYWRkKCdwb3B1cF9pcy1vcGVuZWQnKTtcclxuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgY2xvc2VFc2MpOyAvLyBJZiBkb24ndCByZW1vdmUgdGhlIGV2ZW50bGlzdGVuZXIgZnJvbSBjbG9zZU1vZGFsLCBhbiBlcnJvciB3aWxsIG9jY3VyLlxyXG59XHJcblxyXG5mdW5jdGlvbiBjbG9zZU1vZGFsKHBvcHVwKSB7IC8vIFdpdGhvdXQgJ3NldFRpbWVvdXQnLCBpdCBiZWNhbWUgcmVhbGx5IHNhZCBoZXJlLiA6Y1xyXG4gIHBvcHVwLmNsYXNzTGlzdC5yZW1vdmUoJ3BvcHVwX2lzLW9wZW5lZCcpO1xyXG4gIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBjbG9zZUVzYyk7IC8vIFwiVGhpcyBwaWVjZSBvZiBjb2RlIGZpeGVzIHRoYXQuXCJcclxufVxyXG5cclxuZnVuY3Rpb24gY2xvc2VFc2MoZXZ0KSB7XHJcbiAgZXZ0LmNvZGUgPT09ICdFc2NhcGUnICYmIGNsb3NlTW9kYWwoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX2lzLW9wZW5lZCcpKTtcclxufSIsImNvbnN0IGNoZWNrVmFsaWQgPSAoaW5wdXRMaXN0KSA9PiBpbnB1dExpc3Quc29tZSgoaW5wdXQpID0+ICFpbnB1dC52YWxpZGl0eS52YWxpZCk7XHJcblxyXG5mdW5jdGlvbiBzaG93SW5wdXRFcnJvcihmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2UsIHsgaW5wdXRFcnJvckNsYXNzLCBlcnJvckNsYXNzIH0pIHtcclxuICBjb25zdCBlcnJvckVsZW1lbnQgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XHJcbiAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQoaW5wdXRFcnJvckNsYXNzKTtcclxuICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZChlcnJvckNsYXNzKTtcclxuICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhpZGVJbnB1dEVycm9yKGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQsIHsgaW5wdXRFcnJvckNsYXNzLCBlcnJvckNsYXNzIH0pIHtcclxuICBjb25zdCBlcnJvckVsZW1lbnQgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XHJcbiAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoaW5wdXRFcnJvckNsYXNzKTtcclxuICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShlcnJvckNsYXNzKTtcclxuICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSAnJztcclxufVxyXG5cclxuZnVuY3Rpb24gaXNWYWxpZChmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCB2YWxpZGF0aW9uQ29uZmlnKSB7XHJcbiAgaWYgKGlucHV0RWxlbWVudC52YWxpZGl0eS5wYXR0ZXJuTWlzbWF0Y2gpIHtcclxuICAgIGlucHV0RWxlbWVudC5zZXRDdXN0b21WYWxpZGl0eShpbnB1dEVsZW1lbnQuZGF0YXNldC5lcnJvck1lc3NhZ2UpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBpbnB1dEVsZW1lbnQuc2V0Q3VzdG9tVmFsaWRpdHkoJycpO1xyXG4gIH1cclxuICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgc2hvd0lucHV0RXJyb3IoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlLCB2YWxpZGF0aW9uQ29uZmlnKTtcclxuICB9IGVsc2Uge1xyXG4gICAgaGlkZUlucHV0RXJyb3IoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgdmFsaWRhdGlvbkNvbmZpZyk7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBzZXRFdmVudExpc3RlbmVycyhmb3JtRWxlbWVudCwgdmFsaWRhdGlvbkNvbmZpZykge1xyXG4gIGNvbnN0IGlucHV0TGlzdCA9IEFycmF5LmZyb20oZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh2YWxpZGF0aW9uQ29uZmlnLmlucHV0U2VsZWN0b3IpKTtcclxuICBjb25zdCBidXR0b24gPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKHZhbGlkYXRpb25Db25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xyXG4gIGlucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcclxuICAgICAgaXNWYWxpZChmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCB2YWxpZGF0aW9uQ29uZmlnKTtcclxuICAgICAgZGlzYWJsZWRCdXR0b24oaW5wdXRMaXN0LCBidXR0b24sIHZhbGlkYXRpb25Db25maWcpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGRpc2FibGVkQnV0dG9uKGlucHV0LCBidXR0b24sIHZhbGlkYXRpb25Db25maWcpIHtcclxuICBpZiAoY2hlY2tWYWxpZChpbnB1dCkpIHtcclxuICAgIGJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICBidXR0b24uY2xhc3NMaXN0LmFkZCh2YWxpZGF0aW9uQ29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBidXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgIGJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHZhbGlkYXRpb25Db25maWcuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY2xlYXJWYWxpZGF0aW9uKGZvcm1FbGVtZW50LCB2YWxpZGF0aW9uQ29uZmlnKSB7XHJcbiAgY29uc3QgaW5wdXRMaXN0ID0gQXJyYXkuZnJvbShmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHZhbGlkYXRpb25Db25maWcuaW5wdXRTZWxlY3RvcikpO1xyXG4gIGNvbnN0IGJ1dHRvbiA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IodmFsaWRhdGlvbkNvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3Rvcik7XHJcbiAgaW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICBoaWRlSW5wdXRFcnJvcihmb3JtRWxlbWVudCwgaW5wdXQsIHZhbGlkYXRpb25Db25maWcpO1xyXG4gIH0pXHJcbiAgZGlzYWJsZWRCdXR0b24oaW5wdXRMaXN0LCBidXR0b24sIHZhbGlkYXRpb25Db25maWcpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZW5hYmxlVmFsaWRhdGlvbih2YWxpZGF0aW9uQ29uZmlnKSB7XHJcbiAgY29uc3QgZm9ybUxpc3QgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodmFsaWRhdGlvbkNvbmZpZy5mb3JtU2VsZWN0b3IpKTtcclxuICBmb3JtTGlzdC5mb3JFYWNoKChmb3JtRWxlbWVudCkgPT4ge1xyXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoZm9ybUVsZW1lbnQsIHZhbGlkYXRpb25Db25maWcpO1xyXG4gIH0pO1xyXG59IiwiaW1wb3J0ICcuL3N0eWxlcy9pbmRleC5jc3MnO1xyXG5pbXBvcnQgeyBjcmVhdGVDYXJkLCBoYW5kbGVMaWtlIH0gZnJvbSAnLi9jb21wb25lbnRzL2NhcmQuanMnO1xyXG5pbXBvcnQgeyBvcGVuTW9kYWwsIGNsb3NlTW9kYWwgfSBmcm9tICcuL2NvbXBvbmVudHMvbW9kYWwuanMnO1xyXG5pbXBvcnQgeyBlbmFibGVWYWxpZGF0aW9uLCBjbGVhclZhbGlkYXRpb24gfSBmcm9tICcuL2NvbXBvbmVudHMvdmFsaWRhdGlvbi5qcyc7XHJcbmltcG9ydCB7IGdldEluZm8sIGdldENhcmRzLCBkZWxldGVDYXJkcywgdG9DaGFuZ2VBdmF0YXIsIHRvQ2hhbmdlTmFtZXMsIGFkZENhcmRzfSBmcm9tICcuL2NvbXBvbmVudHMvYXBpLmpzJztcclxuXHJcbi8vIHZhcmlhYmxlIG5hbWVzXHJcbmNvbnN0IGNhcmRDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucGxhY2VzX19saXN0Jyk7XHJcbmNvbnN0IHByb2ZpbGVFZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2VkaXQtYnV0dG9uJyk7XHJcbmNvbnN0IHByb2ZpbGVCdXR0b25BZGQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYWRkLWJ1dHRvbicpO1xyXG5jb25zdCBwcm9maWxlSW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9faW1hZ2UnKTtcclxuY29uc3QgYXZhdGFyUG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2F2YXRhcicpO1xyXG5jb25zdCBpbnB1dExpbmtBdmF0YXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGluay1hdmF0YXItaW5wdXQnKTtcclxuY29uc3QgcG9wdXBEZWxldGVDYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX2RlbGV0ZS1pbWFnZScpO1xyXG5jb25zdCBwb3B1cERlbGV0ZUNhcmRCdXR0b24gPSBwb3B1cERlbGV0ZUNhcmQucXVlcnlTZWxlY3RvcignLnBvcHVwX19idXR0b24nKTtcclxuY29uc3QgcG9wdXBCdXR0b24gPSBhdmF0YXJQb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2J1dHRvbicpO1xyXG5jb25zdCBuZXdDYXJkUG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfdHlwZV9uZXctY2FyZCcpO1xyXG5jb25zdCBpbWFnZU9wZW5Qb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF90eXBlX2ltYWdlJyk7XHJcbmNvbnN0IGltYWdlUG9wdXBJbWFnZSA9IGltYWdlT3BlblBvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW1hZ2UnKTtcclxuY29uc3QgaW1hZ2VQb3B1cENhcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2NhcHRpb24nKVxyXG5jb25zdCBwcm9maWxlTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX190aXRsZScpO1xyXG5jb25zdCBwcm9maWxlRGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fZGVzY3JpcHRpb24nKTtcclxuY29uc3QgcG9wdXBQcm9maWxlRWRpdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF90eXBlX2VkaXQnKTtcclxuY29uc3QgcG9wdXBQcm9maWxlQnV0dG9uID0gcG9wdXBQcm9maWxlRWRpdC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2J1dHRvbicpXHJcbmNvbnN0IGZvcm1Qcm9maWxlRWRpdCA9IHBvcHVwUHJvZmlsZUVkaXQucXVlcnlTZWxlY3RvcignLnBvcHVwX19mb3JtJyk7XHJcbmNvbnN0IGlucHV0TmFtZSA9IGZvcm1Qcm9maWxlRWRpdC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2lucHV0X3R5cGVfbmFtZScpO1xyXG5jb25zdCBpbnB1dERlc2NyaXB0aW9uID0gZm9ybVByb2ZpbGVFZGl0LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW5wdXRfdHlwZV9kZXNjcmlwdGlvbicpO1xyXG5jb25zdCBhbGxQb3B1cHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucG9wdXAnKTtcclxuY29uc3QgY2FyZEJ1dHRvbiA9IG5ld0NhcmRQb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2J1dHRvbicpXHJcbmNvbnN0IGlucHV0UGxhY2VOYW1lRm9ybUFkZE5ld0NhcmQgPSBuZXdDYXJkUG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbnB1dF90eXBlX2NhcmQtbmFtZScpO1xyXG5jb25zdCBpbnB1dFBsYWNlTGlua0Zvcm1BZGROZXdDYXJkID0gbmV3Q2FyZFBvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW5wdXRfdHlwZV91cmwnKTtcclxuY29uc3QgdmFsaWRhdGlvbkNvbmZpZyA9IHtcclxuICBmb3JtU2VsZWN0b3I6ICcucG9wdXBfX2Zvcm0nLFxyXG4gIGlucHV0U2VsZWN0b3I6ICcucG9wdXBfX2lucHV0JyxcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogJy5wb3B1cF9fYnV0dG9uJyxcclxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiAncG9wdXBfX2J1dHRvbl9kaXNhYmxlZCcsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiAncG9wdXBfX2lucHV0X3R5cGVfZXJyb3InLFxyXG4gIGVycm9yQ2xhc3M6ICdwb3B1cF9fZXJyb3JfdmlzaWJsZSdcclxufVxyXG5cclxuYWxsUG9wdXBzLmZvckVhY2goKG91dCkgPT4ge1xyXG4gIG91dC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgKHt0YXJnZXQsIGN1cnJlbnRUYXJnZXR9KSA9PiB7IFxyXG4gICAgY29uc3QgaXNUYXJnZXRDbG9zZUJ1dHRvbiA9IHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3BvcHVwX19jbG9zZScpO1xyXG4gICAgY29uc3QgaXNUYXJnZXRPdmVybGF5ID0gdGFyZ2V0ID09PSBjdXJyZW50VGFyZ2V0O1xyXG4gICAgaWYgKGlzVGFyZ2V0Q2xvc2VCdXR0b24gfHwgaXNUYXJnZXRPdmVybGF5KSBjbG9zZU1vZGFsKG91dCk7XHJcbiAgfSk7XHJcbn0pO1xyXG5cclxuUHJvbWlzZS5hbGwoW2dldEluZm8oXCIvdXNlcnMvbWVcIiksIGdldENhcmRzKFwiL2NhcmRzXCIpXSlcclxuICAudGhlbigoZGF0YSkgPT4ge1xyXG4gICAgY29uc29sZS5sb2coZGF0YSk7XHJcbiAgICBjb25zdCBjdXJyZW50VXNlciA9IGRhdGFbMF07XHJcbiAgICBjb25zdCB1c2VyQ2FyZHMgPSBkYXRhWzFdLmZpbHRlcihjYXJkID0+IGNhcmQub3duZXIuX2lkID09PSBjdXJyZW50VXNlci5faWQpO1xyXG4gICAgcHJvZmlsZU5hbWUudGV4dENvbnRlbnQgPSBkYXRhWzBdLm5hbWU7XHJcbiAgICBwcm9maWxlRGVzY3JpcHRpb24udGV4dENvbnRlbnQgPSBkYXRhWzBdLmFib3V0O1xyXG4gICAgcHJvZmlsZUltYWdlLnN0eWxlID0gYGJhY2tncm91bmQtaW1hZ2U6IHVybCgnJHtkYXRhWzBdLmF2YXRhcn0nKWBcclxuICAgIHVzZXJDYXJkcy5mb3JFYWNoKGNhcmQgPT4gY2FyZENvbnRhaW5lci5hcHBlbmQoY3JlYXRlQ2FyZChjYXJkLCByZW1vdmVDYXJkLCBvcGVuSW1nLCBoYW5kbGVMaWtlLCBjdXJyZW50VXNlci5faWQpKSlcclxuICB9KVxyXG4gIC5jYXRjaChlcnIgPT4gY29uc29sZS5sb2coZXJyKSkgXHJcbiAgXHJcblxyXG5mdW5jdGlvbiBzYXZlSW5mbyhsb2FkLCBidXR0b25UZXh0KSB7XHJcbiAgaWYgKGxvYWQpIHtcclxuICAgIGJ1dHRvblRleHQudGV4dENvbnRlbnQgPSAn0KHQvtGF0YDQsNC90LXQvdC40LUuLi4nXHJcbiAgfSBlbHNlIHtcclxuICAgIGJ1dHRvblRleHQudGV4dENvbnRlbnQgPSBidXR0b25UZXh0LmRhdGFzZXQuYnV0dG9uVGV4dDtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0KGV2dCkgeyAvLyBmdW5jdGlvbiB0aGF0IGFsbG93cyBjaGFuZ2luZyB0aGUgcHJvZmlsZU5hbWUgYW5kIHByb2ZpbGVEZXNjcmlwdGlvbiBcclxuICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICBzYXZlSW5mbyh0cnVlLCBwb3B1cFByb2ZpbGVCdXR0b24pO1xyXG4gIHByb2ZpbGVOYW1lLnRleHRDb250ZW50ID0gaW5wdXROYW1lLnZhbHVlO1xyXG4gIHByb2ZpbGVEZXNjcmlwdGlvbi50ZXh0Q29udGVudCA9IGlucHV0RGVzY3JpcHRpb24udmFsdWU7XHJcbiAgdG9DaGFuZ2VOYW1lcyhpbnB1dE5hbWUudmFsdWUsIGlucHV0RGVzY3JpcHRpb24udmFsdWUpXHJcbiAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgaWYgKHJlcyAmJiByZXMubmFtZSAmJiByZXMuYWJvdXQpIHtcclxuICAgICAgcHJvZmlsZU5hbWUudGV4dENvbnRlbnQgPSByZXMubmFtZTtcclxuICAgICAgcHJvZmlsZURlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gcmVzLmFib3V0O1xyXG4gICAgfVxyXG4gIH0pXHJcbiAgLmNhdGNoKGVyciA9PiBjb25zb2xlLmxvZyhlcnIpKVxyXG4gIC5maW5hbGx5KCgpID0+IHtcclxuICAgIHNhdmVJbmZvKGZhbHNlLCBwb3B1cFByb2ZpbGVCdXR0b24pO1xyXG4gICAgY2xvc2VNb2RhbChwb3B1cFByb2ZpbGVFZGl0KTtcclxuICB9KVxyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gaGFuZGxlQXZhdGFyU3VibWl0KGV2dCkge1xyXG4gIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIHNhdmVJbmZvKHRydWUsIHBvcHVwQnV0dG9uKTtcclxuICB0b0NoYW5nZUF2YXRhcihpbnB1dExpbmtBdmF0YXIudmFsdWUpXHJcbiAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIHByb2ZpbGVJbWFnZS5zdHlsZSA9IGBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJyR7cmVzLmF2YXRhcn0nKWBcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSlcclxuICAgIC5maW5hbGx5KCgpID0+IHsgXHJcbiAgICAgIHNhdmVJbmZvKGZhbHNlLCBwb3B1cEJ1dHRvbik7XHJcbiAgICAgIGNsb3NlTW9kYWwoYXZhdGFyUG9wdXApO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUNhcmRTdWJtaXQoZXZ0KSB7IC8vIGZ1bmN0aW9uIHRoYXQgYWRkcyBhIG5ldyBjYXJkIHRvIHRoZSBwYWdlXHJcbiAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgc2F2ZUluZm8odHJ1ZSwgY2FyZEJ1dHRvbik7XHJcbiAgYWRkQ2FyZHMoaW5wdXRQbGFjZU5hbWVGb3JtQWRkTmV3Q2FyZC52YWx1ZSwgaW5wdXRQbGFjZUxpbmtGb3JtQWRkTmV3Q2FyZC52YWx1ZSlcclxuICAgIC50aGVuKChjYXJkKSA9PiB7XHJcbiAgICAgIGNhcmRDb250YWluZXIuYXBwZW5kKGNyZWF0ZUNhcmQoY2FyZCwgcmVtb3ZlQ2FyZCwgb3BlbkltZywgaGFuZGxlTGlrZSwgSUQpKVxyXG4gICAgfSlcclxuICAgIC5jYXRjaChlcnIgPT4gY29uc29sZS5sb2coZXJyKSlcclxuICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgc2F2ZUluZm8oZmFsc2UsIGNhcmRCdXR0b24pO1xyXG4gICAgICBjbG9zZU1vZGFsKG5ld0NhcmRQb3B1cCk7XHJcbiAgICB9KVxyXG4gIG5ld0NhcmRQb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Zvcm0nKS5yZXNldCgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVEZWxldGVDYXJkKGV2dCkge1xyXG4gIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIHNhdmVJbmZvKHRydWUsIHBvcHVwRGVsZXRlQ2FyZEJ1dHRvbik7XHJcbiAgY29uc3QgY2FyZElEID0gcG9wdXBEZWxldGVDYXJkQnV0dG9uLmRhdGFzZXQuY2FyZElkO1xyXG4gIGNvbnNvbGUubG9nKFwiQ2FyZCBJRCB0byBkZWxldGU6XCIsIGNhcmRJRCk7XHJcbiAgZGVsZXRlQ2FyZHMoY2FyZElEKVxyXG4gICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZygnQ2FyZCBzdWNjZXNzZnVsbHkgZGVsZXRlZCBmcm9tIHNlcnZlcicpO1xyXG4gICAgICBjb25zdCBkZWxldGVDYXJkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY2FyZElEKTtcclxuICAgICAgaWYgKGRlbGV0ZUNhcmQpIHtcclxuICAgICAgICBkZWxldGVDYXJkLnJlbW92ZSgpO1xyXG4gICAgICAgIHBvcHVwRGVsZXRlQ2FyZEJ1dHRvbi5kYXRhc2V0LmNhcmRJZCA9ICcnO1xyXG4gICAgICAgIHNhdmVJbmZvKGZhbHNlLCBwb3B1cERlbGV0ZUNhcmRCdXR0b24pO1xyXG4gICAgICAgIGNsb3NlTW9kYWwocG9wdXBEZWxldGVDYXJkKTtcclxuICAgICAgfVxyXG4gICAgfSlcclxuICAgIC5jYXRjaChlcnIgPT4gY29uc29sZS5sb2coZXJyKSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlbW92ZUNhcmQoY2FyZCkge1xyXG4gIG9wZW5Nb2RhbChwb3B1cERlbGV0ZUNhcmQpO1xyXG4gIHBvcHVwRGVsZXRlQ2FyZEJ1dHRvbi5kYXRhc2V0LmNhcmRJZCA9IGNhcmRbJ19pZCddO1xyXG59XHJcblxyXG5mdW5jdGlvbiBvcGVuSW1nKGRhdGEpIHtcclxuICBpbWFnZVBvcHVwSW1hZ2UuYWx0ID0gZGF0YS5uYW1lO1xyXG4gIGltYWdlUG9wdXBDYXB0aW9uLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xyXG4gIGltYWdlUG9wdXBJbWFnZS5zcmMgPSBkYXRhLmxpbms7XHJcbiAgb3Blbk1vZGFsKGltYWdlT3BlblBvcHVwKTtcclxufTtcclxuXHJcbnByb2ZpbGVFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gIGlucHV0TmFtZS52YWx1ZSA9IHByb2ZpbGVOYW1lLnRleHRDb250ZW50O1xyXG4gIGlucHV0RGVzY3JpcHRpb24udmFsdWUgPSBwcm9maWxlRGVzY3JpcHRpb24udGV4dENvbnRlbnQ7XHJcbiAgY2xlYXJWYWxpZGF0aW9uKHBvcHVwUHJvZmlsZUVkaXQsIHZhbGlkYXRpb25Db25maWcpO1xyXG4gIG9wZW5Nb2RhbChwb3B1cFByb2ZpbGVFZGl0KTtcclxufSk7XHJcblxyXG5wcm9maWxlQnV0dG9uQWRkLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gIGNsZWFyVmFsaWRhdGlvbihuZXdDYXJkUG9wdXAsIHZhbGlkYXRpb25Db25maWcpO1xyXG4gIG9wZW5Nb2RhbChuZXdDYXJkUG9wdXApO1xyXG59KTtcclxuXHJcbnByb2ZpbGVJbWFnZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICBjbGVhclZhbGlkYXRpb24oYXZhdGFyUG9wdXAsIHZhbGlkYXRpb25Db25maWcpO1xyXG4gIGlucHV0TGlua0F2YXRhci52YWx1ZSA9ICcnO1xyXG4gIG9wZW5Nb2RhbChhdmF0YXJQb3B1cCk7XHJcbn0pXHJcblxyXG5uZXdDYXJkUG9wdXAuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgaGFuZGxlQ2FyZFN1Ym1pdCk7XHJcbmZvcm1Qcm9maWxlRWRpdC5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdCk7XHJcbmF2YXRhclBvcHVwLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGhhbmRsZUF2YXRhclN1Ym1pdCk7XHJcbnBvcHVwRGVsZXRlQ2FyZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZURlbGV0ZUNhcmQpO1xyXG5cclxuZW5hYmxlVmFsaWRhdGlvbih2YWxpZGF0aW9uQ29uZmlnKTtcclxuIl0sIm5hbWVzIjpbImNvbmZpZyIsImJhc2VVcmwiLCJoZWFkZXJzIiwiYXV0aG9yaXphdGlvbiIsInBvc3QiLCJ1c2VycyIsImRhdGEiLCJtZXRob2QiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJmZXRjaCIsImNvbmNhdCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwidGhlbiIsInJlcyIsImpzb24iLCJjb25zb2xlIiwibG9nIiwiY2FyZFRlbXBsYXRlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY29udGVudCIsImNyZWF0ZUNhcmQiLCJyZW1vdmVDYXJkIiwib3BlbkltZyIsImhhbmRsZUxpa2UiLCJJRCIsImNhcmRFbGVtZW50IiwiY2xvbmVOb2RlIiwiY2FyZERlbGV0ZUJ1dHRvbiIsImNhcmRJbWFnZSIsImNhcmRUaXRsZSIsImNhcmRMaWtlQnV0dG9uIiwiY2FyZExpa2VDb3VudCIsInNyYyIsImxpbmsiLCJhbHQiLCJuYW1lIiwidGV4dENvbnRlbnQiLCJsaWtlcyIsImFkZEV2ZW50TGlzdGVuZXIiLCJpZCIsIm93bmVyIiwicmVtb3ZlIiwiY2FyZCIsImJ1dHRvbkxpa2UiLCJidXR0b25Db3VudCIsInNvbWUiLCJpIiwiY2hlY2siLCJhZGRMaWtlIiwiY2xhc3NMaXN0IiwiYWRkIiwiY2F0Y2giLCJlcnIiLCJvcGVuTW9kYWwiLCJwb3B1cCIsImNsb3NlRXNjIiwiY2xvc2VNb2RhbCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJldnQiLCJjb2RlIiwiY2hlY2tWYWxpZCIsImlucHV0TGlzdCIsImlucHV0IiwidmFsaWRpdHkiLCJ2YWxpZCIsImhpZGVJbnB1dEVycm9yIiwiZm9ybUVsZW1lbnQiLCJpbnB1dEVsZW1lbnQiLCJfcmVmMiIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJlcnJvckVsZW1lbnQiLCJkaXNhYmxlZEJ1dHRvbiIsImJ1dHRvbiIsInZhbGlkYXRpb25Db25maWciLCJkaXNhYmxlZCIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJjbGVhclZhbGlkYXRpb24iLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiZm9yRWFjaCIsImNhcmRDb250YWluZXIiLCJwcm9maWxlRWRpdEJ1dHRvbiIsInByb2ZpbGVCdXR0b25BZGQiLCJwcm9maWxlSW1hZ2UiLCJhdmF0YXJQb3B1cCIsImlucHV0TGlua0F2YXRhciIsImdldEVsZW1lbnRCeUlkIiwicG9wdXBEZWxldGVDYXJkIiwicG9wdXBEZWxldGVDYXJkQnV0dG9uIiwicG9wdXBCdXR0b24iLCJuZXdDYXJkUG9wdXAiLCJpbWFnZU9wZW5Qb3B1cCIsImltYWdlUG9wdXBJbWFnZSIsImltYWdlUG9wdXBDYXB0aW9uIiwicHJvZmlsZU5hbWUiLCJwcm9maWxlRGVzY3JpcHRpb24iLCJwb3B1cFByb2ZpbGVFZGl0IiwicG9wdXBQcm9maWxlQnV0dG9uIiwiZm9ybVByb2ZpbGVFZGl0IiwiaW5wdXROYW1lIiwiaW5wdXREZXNjcmlwdGlvbiIsImFsbFBvcHVwcyIsImNhcmRCdXR0b24iLCJpbnB1dFBsYWNlTmFtZUZvcm1BZGROZXdDYXJkIiwiaW5wdXRQbGFjZUxpbmtGb3JtQWRkTmV3Q2FyZCIsImZvcm1TZWxlY3RvciIsInNhdmVJbmZvIiwibG9hZCIsImJ1dHRvblRleHQiLCJkYXRhc2V0IiwiY2FyZElkIiwib3V0IiwiX3JlZiIsInRhcmdldCIsImN1cnJlbnRUYXJnZXQiLCJjb250YWlucyIsIlByb21pc2UiLCJhbGwiLCJjdXJyZW50VXNlciIsInVzZXJDYXJkcyIsImZpbHRlciIsIl9pZCIsImFib3V0Iiwic3R5bGUiLCJhdmF0YXIiLCJhcHBlbmQiLCJ2YWx1ZSIsImRhdGFOYW1lIiwiZGF0YUxpbmsiLCJwcmV2ZW50RGVmYXVsdCIsImZpbmFsbHkiLCJyZXNldCIsInRvQ2hhbmdlTmFtZXMiLCJhdmF0YXJMaW5rIiwiY2FyZElEIiwiZGVsZXRlQ2FyZCIsInBhdHRlcm5NaXNtYXRjaCIsInNldEN1c3RvbVZhbGlkaXR5IiwiZXJyb3JNZXNzYWdlIiwic2hvd0lucHV0RXJyb3IiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsImlzVmFsaWQiLCJzZXRFdmVudExpc3RlbmVycyIsImVuYWJsZVZhbGlkYXRpb24iXSwic291cmNlUm9vdCI6IiJ9